# 开发更新记录

## 2025-12-09 布局调整
- 以剪映应用的三栏布局为参考，完成主界面骨架：左侧组件库、中部手机画布、右侧属性面板，下方工具栏突出图层和对齐能力。
- 画布采用手机框架展示，不依赖真机属性，预览视图即等同进入应用效果，确保后续生成代码可兼容所有尺寸。
- 顶部加入保存与预览操作入口，为后续APK打包与快速校验留出入口位。

## 2025-12-09 构建与测试尝试
- 执行 `gradle assembleDebug` 进行APK打包验证，因容器无法从远程仓库获取 Android Gradle Plugin 8.5.0 而失败，需在可访问Google Maven或有本地缓存的环境复测。
- 失败日志已记录，便于后续在具备SDK与网络的机器上对照排查并完成正式打包。

## 2025-12-10 Termux 打包支持
- 编写 `termux_build.sh`（原 `Termux打包脚本.sh`），自动识别 Termux 环境并复用本机 JDK/SDK 配置，便于在手机端直接打包。
- 补充《Termux 打包说明》，明确依赖安装、脚本用法及常见问题，方便快速在移动端复现构建。

## 2025-12-11 运行打包脚本
- 新增打包快捷脚本（后续更名为 `run_build.sh`），将 Termux 打包流程封装为一键入口，默认执行 `assembleDebug`，可按需传入其他任务。
- 文档同步更新，强调直接在 Termux 终端执行即可完成打包，减少记忆成本。

## 2025-12-12 run 打包入口调整
- 按照“run”命名要求，将一键脚本更名为 `run_build.sh`，避免与终端 `./` 兼容性问题。
- 默认用 `bash run_build.sh` 调用，并在脚本内改为 `bash` 触发 `termux_build.sh`，适配手机端文件系统限制。

## 2025-12-13 脚本命名英文化
- 应用户要求，移除中文脚本命名，统一为 `termux_build.sh` 与 `run_build.sh`，并保留 `legacy_run_build.sh` 兼容旧调用。
- 文档同步替换调用示例，便于在手机端直接使用 `bash` 方式执行。

## 2025-12-14 已完成功能汇总
- 新增《已完成功能列表》，集中描述当前已交付的 CP0 架构、剪映式主界面骨架、手机画布预览与 Termux 打包脚本可用性。
- README 增补“当前进展速览”提示，便于快速了解现阶段成果与后续优先事项。

## 2025-12-15 run 打包脚本与安装器联动
- 将打包入口统一命名为 `run.sh`，保持英文脚本名并用 bash 直接调用，减少移动端文件系统的可执行限制问题。
- 在打包成功后自动定位最新 APK 并通过 `termux-open` 或 `am` 触发系统安装器，实现“一键打包后一键安装”的体验。
- `legacy_run_build.sh` 改为转发到 `run.sh`，兼容旧命令同时复用自动安装流程。

## 2025-12-16 画布与属性联动增强
- 为组件库加入选中高亮与点击交互，当前选中组件会同步到画布预览与属性面板，便于后续生成代码前的配置。
- 新增缩放滑杆，支持 50%~250% 画布缩放，并在状态条与属性面板中实时显示百分比，强调“预览等同真机”的呈现。
- 画布内容增加智能提示卡片，突出对齐参考线入口与选中组件的适配展示，持续贴合剪映式布局体验。

## 2025-12-17 画布图层与可见性控制
- 组件库新增“一键添加到画布”按钮，可将当前选中组件快速生成图层，保持中央画布与右侧属性面板同步。
- 画布预览与属性面板均显示图层列表，支持聚焦选中组件、显示/隐藏切换与锁定/解锁，强化剪映式图层管理体验。
- 状态条、缩放提示与图层状态保持实时同步，为后续真机等效预览与代码生成打下基础。

## 2025-12-18 移动端打包兼容与画布易用性
- `termux_build.sh` 在共享存储无法修改执行权限时自动切换 `bash gradlew`，确保 `bash run.sh` 仍可在手机端直接打包。
- 画布缩放新增“还原”按钮，一键重置到 100%，便于快速回到真机等效的预览比例。

## 2025-12-19 资源构建问题修复
- 修复 `Theme.Material3.DayNight.NoActionBar` 样式缺失导致的资源链接失败，新增 `com.google.android.material:material` 依赖以提供 Material3 主题资源。
- 提醒后续在 Termux/本地环境重新执行 `bash run.sh assembleDebug`，验证资源链接已通过并可继续生成 APK。
